{"version":3,"sources":["../../src/middleware/index.js"],"names":["app","routes","cookieParser","require","use","req","res","next","cookie","cookies","uuid","undefined","randomNumber","Math","random","toString","substring","length","maxAge","httpOnly","console","log"],"mappings":";;;;;;AAAA;;AACA;;kBAEe,gBAAa;AAAA,MAAVA,GAAU,QAAVA,GAAU;;AAC3B,MAAIC,SAAS,sBAAb;AACA,MAAIC,eAAeC,QAAQ,eAAR,CAAnB;;AAEDH,MAAII,GAAJ,CAAQF,cAAR;;AAEA;AACAF,MAAII,GAAJ,CAAQ,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAChC;AACA,QAAIC,SAASH,IAAII,OAAJ,CAAYC,IAAzB;AACA,QAAIF,WAAWG,SAAf,EACA;AACE;AACA,UAAIC,eAAaC,KAAKC,MAAL,GAAcC,QAAd,EAAjB;AACAH,qBAAaA,aAAaI,SAAb,CAAuB,CAAvB,EAAyBJ,aAAaK,MAAtC,CAAb;AACAX,UAAIE,MAAJ,CAAW,MAAX,EAAkB,eAAlB,EAA4B,EAAEU,QAAQ,MAAV,EAAkBC,UAAU,IAA5B,EAA5B;AACAC,cAAQC,GAAR,CAAY,6BAAZ;AACD,KAPD,MASA;AACE;AACAD,cAAQC,GAAR,CAAY,eAAZ,EAA6Bb,MAA7B;AACD;AACDD,WAhBgC,CAgBxB;AACT,GAjBD;;AAqBC,SAAON,MAAP;AACA,C","file":"index.js","sourcesContent":["import { Router } from 'express';\nimport { v4 as uuidv4 } from 'uuid';\n\nexport default ({ app }) => {\n\tlet routes = Router();\n\tvar cookieParser = require('cookie-parser')\n\napp.use(cookieParser());\n\n// set a cookie\napp.use(function (req, res, next) {\n  // check if client sent cookie\n  var cookie = req.cookies.uuid;\n  if (cookie === undefined)\n  {\n    // no: set a new cookie\n    var randomNumber=Math.random().toString();\n    randomNumber=randomNumber.substring(2,randomNumber.length);\n    res.cookie('uuid',uuidv4(), { maxAge: 900000, httpOnly: true });\n    console.log('cookie created successfully');\n  } \n  else\n  {\n    // yes, cookie was already present \n    console.log('cookie exists', cookie);\n  } \n  next(); // <-- important!\n});\n\n\n\n\treturn routes;\n}\n"]}